"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.measureCallbackDuration = exports.timeCallback = void 0;
/**
 * Measures how long (in milliseconds) the given callback takes to run to completion. Automatically
 * switches to async mode and awaits callbacks if they return a promise (otherwise this function is
 * purely synchronous).
 */
function timeCallback(callback) {
    const startTime = Date.now();
    const result = callback();
    if (result instanceof Promise) {
        return new Promise(async (resolve, reject) => {
            try {
                await result;
                const endTime = Date.now();
                resolve(endTime - startTime);
            }
            catch (caught) {
                reject(caught);
            }
        });
    }
    const endTime = Date.now();
    return (endTime - startTime);
}
exports.timeCallback = timeCallback;
/**
 * Measures how long (in milliseconds) the given callback takes to run to completion. Automatically
 * switches to async mode and awaits callbacks if they return a promise (otherwise this function is
 * purely synchronous).
 *
 * Alias of timeCallback.
 */
exports.measureCallbackDuration = timeCallback;
